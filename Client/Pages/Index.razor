@page "/"
@using Microsoft.AspNetCore.Components.WebAssembly.Authentication
@inject SignOutSessionStateManager SignOutManager

@attribute [AllowAnonymous]
<MudContainer Class="mt-16">
    <MudGrid Class="mt-8" Justify="Justify.Center">
        <MudItem xs="12" sm="6" md="4">
            <MudCard Elevation="25" Class="rounded-lg pb-4">
                <MudCardHeader>
                    <CardHeaderContent>
                        <MudText Typo="Typo.h3" Align="Align.Center" GutterBottom="true">Blazor Chat</MudText>
                    </CardHeaderContent>
                </MudCardHeader>
                <MudCardActions Class="d-flex justify-center">
                    <MudButton Link="authentication/login" Variant="Variant.Filled" Color="Color.Primary" Size="Size.Large" Style="width:50%;">Login</MudButton>
                    <MudButton Link="authentication/register" Variant="Variant.Filled" Color="Color.Primary" Size="Size.Large" Style="width:50%;">Register</MudButton>
                </MudCardActions>
            </MudCard>
        </MudItem>
    </MudGrid>
</MudContainer>
@code
{
    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        var authState = await _authenticationStateProvider.GetAuthenticationStateAsync();
        var user = authState.User;
        if (user.Identity.IsAuthenticated)
        {
            _navigationManager.NavigateTo("chat");
        }
    }
}
